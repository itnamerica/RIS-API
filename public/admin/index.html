<html>
<head>
    <link rel="stylesheet" type="text/css" href="./css/style.css">
    </link>
    <script src="./js/sb.min.js"></script>
</head>
<body>
    <main>
        <h1 id="message">Welcome, </h1>
        <div class="container">
            <div id="demo">

            </div>
            <input type="button" value="sign in" onclick="login()">
        </div>
    </main>
</body>
<script>
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const message = urlParams.get('message');
    document.getElementById('message').innerText = message;
</script>
<script src="./js/index.js"></script>
<script>
    function login() {
        let headers = new Headers();
        headers.append("Content-Type", "application/json");
        // headers.append("Cookie", "language=en-US; this.sid=s%3AlMz9_IqNigWOcbLq6OWOHxmYUxjQdJE5.2Bv5XcB0Boc6lQgXgmosUdwcSJtWN3l3J%2FJLF9qPDUo");

        const body = JSON.stringify({
            "email": "",
            "password": ""
        });

        const requestOptions = {
            method: 'POST',
            headers: headers,
            body: body,
            // redirect: 'follow'
        };

        fetch("/signin", requestOptions).then(response => response.text()).then(result => {
            console.log('result', result, JSON.parse(result));
            const { success, user } = JSON.parse(result);
            console.log('{ success, user }', success, user);
            if (success == true && user) {
                window.location.href = '/dashboard';
            }
        }).catch(error => {
            console.log('error', error);

        });
    }
</script>
</html>